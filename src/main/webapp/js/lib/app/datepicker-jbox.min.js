!function(a){a.jBox=function(t,e){e=a.extend({},a.jBox.defaults,e),e.showFade=e.opacity>0,e.opacity=.7,e.isTip=e.isTip||!1,e.isG=e.isG||!1,e.isMessager=e.isMessager||!1,void 0==t&&(t=""),e.border<0&&(e.border=0),void 0==e.id&&(e.id="jBox_"+Math.floor(1e6*Math.random())),(isIeBrowser||$("html").hasClass("ie11"))&&setIframeInOffice(e.id,"jbox"),e.isTip||closeIframeMenu();var i=!1,s=a("#"+e.id);if(s.length>0)return e.zIndex=a.jBox.defaults.zIndex++,s.css({zIndex:e.zIndex}),s.find("#jbox").css({zIndex:e.zIndex+1}),s;var n={url:"",type:"",html:"",isObject:t.constructor==Object};if(!n.isObject){t+="";var o=t.toLowerCase();0==o.indexOf("id:")?n.type="ID":0==o.indexOf("get:")?n.type="GET":0==o.indexOf("post:")?n.type="POST":0==o.indexOf("iframe:")?n.type="IFRAME":0==o.indexOf("html:")?n.type="HTML":(t="html:"+t,n.type="HTML"),t=t.substring(t.indexOf(":")+1,t.length)}if(!e.isTip&&!e.isMessager&&!e.showScrolling){var r=/msie/.test(navigator.userAgent.toLowerCase());a(r?"html":"body").attr("style","overflow:hidden;padding-right:17px;")}var d=!(e.isTip||void 0==e.title),l="GET"==n.type||"POST"==n.type||"IFRAME"==n.type,c="number"==typeof e.width?e.width-50+"px":"90%",h=[];h.push('<div id="'+e.id+'" class="jbox-'+(e.isTip?"tip":e.isMessager?"messager":"body")+'">'),e.showFade&&h.push('<div id="jbox-fade" class="jbox-fade" style="position:absolute;background-color:#505050;"></div>'),h.push('<div id="jbox-temp" class="jbox-temp" style="width:0px;height:0px;background-color:#ff3300;position:absolute;z-index:1005;fdisplay:none;"></div>'),e.draggable&&h.push('<div id="jbox-drag" class="jbox-drag" style="position:absolute;z-index:1005;display:none;"></div>'),h.push('<div id="jbox" class="jbox" style="position:absolute;width:auto;height:auto;background-color:#fff;border-radius: 12px;border:5px solid #5696cb;'+(e.isTip?"background-color:#fff;":"")+'">'),h.push('<div class="jbox-help-title jbox-title-panel" style="height:30px;display:none;"></div>'),h.push('<div class="jbox-con-wrap" style="margin:0px;padding:0px;border:none;'+("error"==e.icon?"background-colorrgb(255, 249, 249)":"")+'">'),h.push('<div class="jbox-container" style="width:auto; height:auto;">'),h.push('<a class="fa jbox-close" title="'+a.jBox.languageDefaults.close+'" onmouseover="$(this).addClass(\'jbox-close-hover\');" onmouseout="$(this).removeClass(\'jbox-close-hover\');" style="position:absolute; display:block; color:#8d8d8d;cursor:pointer; top:'+(2+e.border-(e.isTip?1:5))+"px; right:"+(2+(e.isTip?e.border+5:e.border))+"px;font-size:20px; width:15px; height:15px;"+(e.showClose?"":"display:none;")+'" id="jbox-close-focus">×</a>'),d&&(h.push('<div class="jbox-title-panel" style="height:20px;">'),h.push("</div>")),h.push('<div id="jbox-states"></div>'),h.push("</div></div></div></div>");var p='<iframe name="jbox-iframe" id="jbox-iframe" width="100%" height="100%" marginheight="0" marginwidth="0" frameborder="0" scrolling="'+e.iframeScrolling+'"></iframe>',u=a(window),f=a(document.body),m=a(h.join("")).appendTo(f),g=m.children("#jbox"),b=m.children("#jbox-fade"),v=m.children("#jbox-temp");if(!n.isObject){switch(n.type){case"ID":n.html=a("#"+t).html();break;case"GET":case"POST":n.html="",n.url=t;break;case"HTML":n.html=t;break;case"IFRAME":if(n.html=p,-1==t.indexOf("#"))n.url=t+(-1==t.indexOf("?")?"?___t":"&___t")+Math.random();else{var o=t.split("#");n.url=o[0]+(-1==o[0].indexOf("?")?"?___t":"&___t")+Math.random()+"#"+o[1]}}t={state0:{content:n.html,buttons:e.buttons,buttonsFocus:e.buttonsFocus,submit:e.submit}}}var x=[],w=g.find(".jbox-help-title").outerHeight(!0),y=g.find(".jbox-help-button").outerHeight(!0);if(a.each(t,function(i,s){n.isObject&&(s=a.extend({},a.jBox.stateDefaults,s)),t[i]=s,void 0==s.buttons&&(s.buttons={});var o=!1;a.each(s.buttons,function(t,e){o=!0});var r="auto";"number"==typeof e.height&&(r=e.height,d&&(r-=w),o&&(r-=y),r=r-1+"px");var c="",h="25px";if(!n.isObject&&l){var p=e.height;"number"==typeof e.height&&(d&&(p-=w),o&&(p-=y),h=p/5*2+"px",p=p-1+"px"),c=['<div id="jbox-content-loading" class="jbox-content-loading" style="min-height:70px;height:'+p+'; text-align:center;">','<div class="jbox-content-loading-image" style="display:block; margin:auto; width:220px; height:19px; padding-top: '+h+';"></div>',"</div>"].join("")}x.push('<div id="jbox-state-'+i+'" class="jbox-state" style="display:none;">'),x.push('<div style="min-width:50px;height:'+r+';">'+c+'<div id="jbox-content" class="jbox-content" style="height:'+r+';max-height:270px;">'+s.content+"</div>"),"success"==e.icon&&x.push('<div style="margin-top:10px;margin-left:20px;font-size:16px;">共<b>12</b>人<span style="margin-left:20px;color:#5696cb;cursor:pointer;" id="alert-content"><i class="fa fa-caret-right" style="margin-right:5px;"></i>查看全部</span></div>'),x.push("</div>"),x.push('<div class="jbox-button-panel form-btn" style="height:auto;'+("success"==e.icon?"padding:5px 0 10px 0;":"info"==e.icon||"error"==e.icon?"margin-bottom:15px;":"padding-right:10px;margin-bottom:10px;")+"text-align: right;"+(o?"":"display:none;")+'">'),e.isTip||"warning"!==e.icon||x.push('<button class="jbox-bottom-text btn"  type="button" ondragstart="return false" style="min-width:50px;margin-right:0;margin-left:10px;"></button><button class="jbox-bottom-text1 btn" type="button" style="min-width:50px;margin-right:0;margin-left:10px;"></button><button class="jbox-bottom-text2 btn" type="button" style="min-width:50px;margin-right:0;margin-left:10px;"></button>'),("success"==e.icon||"error"==e.icon||"info"==e.icon)&&a.each(s.buttons,function(t,i){x.push('<span value="'+i+'" ondragstart="return false" style="margin: 0px 10px 20px 0px;"><a href="###" ondragstart="return false" id="'+e.id+'_find" class="btn jbox-close" style="height:30px;min-width:60px;line-height:20px;">确定</a></span>')}),x.push("</div></div>")}),g.find("#jbox-states").html(x.join("")).children(".jbox-state:first").css("display","block"),l)var o=g.find("#jbox-content").css({position:i?"absolute":"fixed",left:-1e4});a(document).on("click","#alert-content",function(){a("#alert-conent-gang").css({"max-height":"200px",height:"auto","overflow-y":"auto"}),a(this).hide()}),a.each(t,function(t,e){var i=g.find("#jbox-state-"+t);i.children(".jbox-button-panel").children("button").click(function(){var t=i.find("#jbox-content"),s=e.buttons[a(this).text()],n={};a.each(g.find("#jbox-states :input").serializeArray(),function(t,e){void 0===n[e.name]?n[e.name]=e.value:typeof n[e.name]==Array?n[e.name].push(e.value):n[e.name]=[n[e.name],e.value]});var o=e.submit(s,t,n);(void 0===o||o)&&F()}).bind("mousedown",function(){a(this).addClass("jbox-button-active")}).bind("mouseup",function(){a(this).removeClass("jbox-button-active")}).bind("mouseover",function(){a(this).addClass("jbox-button-hover")}).bind("mouseout",function(){a(this).removeClass("jbox-button-active").removeClass("jbox-button-hover")})});var T=function(){m.css({top:u.scrollTop()}),e.isMessager&&g.css({position:i?"absolute":"fixed",right:1,bottom:1})},k=function(){var t=u.height();return document.body.clientHeight<t?t:document.body.clientHeight},j=function(){if(e.showFade)if(e.persistent){var t=0;m.addClass("jbox-warning");var i=setInterval(function(){m.toggleClass("jbox-warning"),t++>1&&(clearInterval(i),m.removeClass("jbox-warning"))},100)}else F()},D=function(t){if(e.isTip||e.isMessager)return!1;var i=window.event?event.keyCode:t.keyCode;if(27==i&&F(),9==i){var s=a(":input:enabled:visible",m),n=!t.shiftKey&&t.target==s[s.length-1],o=t.shiftKey&&t.target==s[0];if(n||o)return setTimeout(function(){if(s){var t=s[o===!0?s.length-1:0];t&&t.focus()}},10),!1}},C=function(){e.showFade&&b.css({position:"absolute",height:e.isTip?k():u.height(),width:i?u.width():"100%",top:0,left:0,right:0,bottom:0})},S=function(){e.isMessager?g.css({position:i?"absolute":"fixed",right:1,bottom:1}):(v.css({top:e.top}),g.css({position:"absolute",top:(u.height()-g.outerHeight())/2.5,left:(u.width()-g.outerWidth())/2})),(e.showFade&&!e.isTip||!e.showFade&&!e.isTip&&!e.isMessager)&&m.css({position:i?"absolute":"fixed",height:e.showFade?u.height():0,width:"100%",top:i?u.scrollTop():0,left:0,right:0,bottom:0}),C()},M=function(){e.zIndex=a.jBox.defaults.zIndex++,m.css({zIndex:e.zIndex}),g.css({zIndex:e.zIndex+1})},U=function(){e.zIndex=a.jBox.defaults.zIndex++,m.css({zIndex:e.zIndex}),g.css({display:"none",zIndex:e.zIndex+1}),e.showFade&&b.css({display:"none",zIndex:e.zIndex,opacity:e.opacity})},_=function(t){var i=t.data;return i.target.find("iframe").hide(),e.dragClone&&i.target.prev().css({left:i.target.css("left"),top:i.target.css("top"),marginLeft:-2,marginTop:-2,width:i.target.width()+2,height:i.target.height()+2}).show(),!1},P=function(t){var i=t.data,s=i.startLeft+t.pageX-i.startX,a=i.startTop+t.pageY-i.startY;if(e.dragLimit){var n=1,o=document.documentElement.clientHeight-t.data.target.height()-1,r=1,d=document.documentElement.clientWidth-t.data.target.width()-1;n>a&&(a=n+(e.dragClone?2:0)),a>o&&(a=o-(e.dragClone?2:0)),r>s&&(s=r+(e.dragClone?2:0)),s>d&&(s=d-(e.dragClone?2:0))}return e.dragClone?i.target.prev().css({left:s,top:a}):i.target.css({left:s,top:a}),!1},B=function(t){if(a(document).unbind(".draggable"),e.dragClone){var i=t.data.target.prev().hide();t.data.target.css({left:i.css("left"),top:i.css("top")}).find("iframe").show()}else t.data.target.find("iframe").show();return!1},I=function(t){var e=t.data.target.position(),i={target:t.data.target,startX:t.pageX,startY:t.pageY,startLeft:e.left,startTop:e.top};a(document).bind("mousedown.draggable",i,_).bind("mousemove.draggable",i,P).bind("mouseup.draggable",i,B)},F=function(){if(e.isTip||e.isMessager)if(e.isTip){var t=a(document.body).data("tip");if(t&&1==t.next){v.css("top",t.options.top);var i=v.offset().top+u.scrollTop();i==g.offset().top?H():g.find("#jbox-content").html(t.options.content.substr(5)).end().css({left:(u.width()-g.outerWidth())/2}).animate({top:i,opacity:.1},500,H)}else g.animate({top:"-=200",opacity:0},500,H)}else switch(e.showType){case"slide":g.slideUp(e.showSpeed,H);break;case"fade":g.fadeOut(e.showSpeed,H);break;case"show":default:g.hide(e.showSpeed,H)}else 1==a(".jbox-body").length&&a("body").removeAttr("style"),H()},H=function(){if(u.unbind("resize",C),!e.draggable||e.isTip||e.isMessager||g.find(".jbox-title-panel").unbind("mousedown",I),"IFRAME"!=n.type&&g.find("#jbox-iframe").attr({src:"about:blank"}),g.html("").remove(),i&&!e.isTip&&f.unbind("scroll",T),e.showFade&&b.fadeOut("fast",function(){b.unbind("click",j).unbind("mousedown",M).html("").remove()}),m.unbind("keydown keypress",D).html("").remove(),i&&e.showFade&&a("select").css("visibility","visible"),"function"==typeof e.closed){if(e.closed(),!e.isTip){openIframeMenu();var t=document.getElementById("topnav-other_modules")||window.parent.document.getElementById("topnav-other_modules");setTimeout(function(){$(".modal").hasClass("in")||$(".jbox-body").length||$(t).show().other()},300)}(isIeBrowser||$("html").hasClass("ie11"))&&removeIframeInOffice(e.id)}},O=function(){e.timeout>0&&(g.data("autoClosing",window.setTimeout(F,e.timeout)),e.isMessager&&g.hover(function(){window.clearTimeout(g.data("autoClosing"))},function(){g.data("autoClosing",window.setTimeout(F,e.timeout))}))},G=function(){"function"==typeof e.loaded&&e.loaded(g.find(".jbox-state:visible").find(".jbox-content"))};if(!n.isObject)switch(n.type){case"GET":case"POST":a.ajax({type:n.type,url:n.url,data:void 0==e.ajaxData?{}:e.ajaxData,dataType:"html",cache:!1,success:function(t,e){g.find("#jbox-content").css({position:"static"}).html(t).show().prev().hide(),G()},error:function(){g.find("#jbox-content-loading").html('<div style="padding-top:50px;padding-bottom:50px;text-align:center;">Loading Error.</div>')}});break;case"IFRAME":g.find("#jbox-iframe").attr({src:n.url}).bind("load",function(t){a(this).parent().css({position:"static"}).show().prev().hide(),g.find("#jbox-states .jbox-state:first .jbox-button-focus").focus(),G()});break;default:g.find("#jbox-content").show()}S(),U(),i&&!e.isTip&&u.scroll(T),e.showFade&&b.click(j),u.resize(C),m.bind("keydown keypress",D),g.find(".jbox-close").click(F),e.showFade&&b.fadeIn("fast");var E="show";if("slide"==e.showType?E="slideDown":"fade"==e.showType&&(E="fadeIn"),e.isMessager)g[E](e.showSpeed,O);else{var Y=a(document.body).data("tip");Y&&1==Y.next?(a(document.body).data("tip",{next:!1,options:{}}),g.css("display","")):!n.isObject&&l?g[E](e.showSpeed):g[E](e.showSpeed,G)}if(e.isTip)g.find(".jbox-container").addClass("jbox-tip-color jbox-tip-box");else{var z={};for(var c in e.buttons)"yes"==e.buttons[c]?z.yes=c:"no"==e.buttons[c]?z.no=c:"cancel"==e.buttons[c]&&(z.cancel=c);(null==z||void 0==z)&&(z.yes="是",z.cancel="取消",z.no="否"),z.cancel||g.find(".jbox-bottom-text1").hide(),g.find(".jbox-bottom-text").html(z.yes),g.find(".jbox-bottom-text1").html(z.cancel),g.find(".jbox-bottom-text2").html(z.no)}return a("#"+e.id+"_find").focus(),g.find(".jbox-bottom-text2").focus(),a(".modal").hasClass("in")&&(document.onkeydown=function(t){window.event&&(t=window.event);t.charCode||t.keyCode}),e.isG&&g.find(".jbox-container").addClass("jbox-g-color"),"IFRAME"!=n.type?g.find("#jbox-states .jbox-state:first .jbox-button-focus").focus():g.focus(),e.isMessager||O(),m.bind("mousedown",M),!e.draggable||e.isTip||e.isMessager||g.find(".jbox-title-panel").bind("mousedown",{target:g},I).css("cursor","move"),m},a.jBox.version=2.3,a.jBox.defaults={id:null,top:"12%",zIndex:"99999",border:5,opacity:.3,timeout:0,showType:"fade",showSpeed:"fast",showIcon:!0,showClose:!0,draggable:!1,dragLimit:!0,dragClone:!1,persistent:!0,showScrolling:!0,ajaxData:{},iframeScrolling:"auto",title:"",width:350,height:"auto",bottomText:"",buttons:{},buttonsFocus:0,loaded:function(t){},submit:function(t,e,i){return!0},closed:function(t){}},a.jBox.stateDefaults={content:"",buttons:{"确定":"ok"},buttonsFocus:0,submit:function(t,e,i){return!0}},a.jBox.tipDefaults={content:"",icon:"info",top:"40%",width:"auto",height:"auto",opacity:0,timeout:1e3,closed:function(){}},a.jBox.messagerDefaults={content:"",title:"jBox",icon:"none",width:350,height:"auto",timeout:3e3,showType:"slide",showSpeed:600,border:0,buttons:{},buttonsFocus:0,loaded:function(){},submit:function(t,e,i){return!0},closed:function(){}},a.jBox.languageDefaults={close:"关闭",ok:"确定",yes:"是",no:"否",cancel:"取消"},a.jBox.setDefaults=function(t){a.jBox.defaults=a.extend({},a.jBox.defaults,t.defaults),a.jBox.stateDefaults=a.extend({},a.jBox.stateDefaults,t.stateDefaults),a.jBox.tipDefaults=a.extend({},a.jBox.tipDefaults,t.tipDefaults),a.jBox.messagerDefaults=a.extend({},a.jBox.messagerDefaults,t.messagerDefaults),a.jBox.languageDefaults=a.extend({},a.jBox.languageDefaults,t.languageDefaults)},a.jBox.getBox=function(){return a(".jbox-body").eq(a(".jbox-body").length-1)},a.jBox.getIframe=function(t){var e="string"==typeof t?a("#"+t):a.jBox.getBox();return e.find("#jbox-iframe").get(0)},a.jBox.getContent=function(){return a.jBox.getState().find(".jbox-content").html()},a.jBox.setContent=function(t){return a.jBox.getState().find(".jbox-content").html(t)},a.jBox.getState=function(t){return void 0==t?a.jBox.getBox().find(".jbox-state:visible"):a.jBox.getBox().find("#jbox-state-"+t)},a.jBox.getStateName=function(){return a.jBox.getState().attr("id").replace("jbox-state-","")},a.jBox.goToState=function(t,e){var i=a.jBox.getBox();if(void 0!=i&&null!=i){var s;t=t||!1,i.find(".jbox-state").slideUp("fast"),s="string"==typeof t?i.find("#jbox-state-"+t):t?i.find(".jbox-state:visible").next():i.find(".jbox-state:visible").prev(),s.slideDown(350,function(){window.setTimeout(function(){s.find(".jbox-button-focus").focus(),void 0!=e&&s.find(".jbox-content").html(e)},20)})}},a.jBox.nextState=function(t){a.jBox.goToState(!0,t)},a.jBox.prevState=function(t){a.jBox.goToState(!1,t)},a.jBox.close=function(t,e){if(t=t||!1,e=e||"body","string"==typeof t)a("#"+t).find(".jbox-close").click();else{var i=a(".jbox-"+e);if(t)for(var s=0,n=i.length;n>s;++s)i.eq(s).find(".jbox-close").click();else i.length>0&&i.eq(i.length-1).find(".jbox-close").click()}},a.jBox.open=function(t,e,i,s,n){var o={content:t,title:e,width:i,height:s};n=a.extend({},o,n),n=a.extend({},a.jBox.defaults,n),a.jBox(n.content,n)},a.jBox.prompt=function(b,c,d,e){var eg=e;var defaults={content:b,title:c,icon:d,buttons:eval('({ "'+a.jBox.languageDefaults.ok+'": "ok" })')};e=a.extend({},defaults,e),e=a.extend({},a.jBox.defaults,e),e.border<0&&(e.border=0),"info"!=e.icon&&"warning"!=e.icon&&"success"!=e.icon&&"error"!=e.icon&&"question"!=e.icon&&(padding="",e.icon="none");var f=void 0==e.title?10:35,g="none"==e.icon?"height:auto;":"min-height:80px;height:auto;",h=[];h.push("html:"),h.push('<div style="width:380px;'+g+'text-align:left;font-size:16px;line-height:35px;">'),h.push('<div style="margin-bottom:15px;">'),h.push('<span style="font-size: '+("S"==eg?"18":"22")+'px;max-height:220px;overflow-y:auto;word-wrap: break-word;line-height:1.5;margin-top:10px;margin-left:10px;display:block;"><span class="fa jbox-icon-'+e.icon+'" style="float:left;width:45px; height:45px;margin-right:10px;background:url('+getRootPath()+"/images/demoimg/alert-"+("error"==e.icon?"1":"warning"==e.icon?"3":"2")+'.png)"></span>'+e.title+"</span>"),h.push("</div>"),"success"==e.icon&&h.push('<div style="border:1px dashed #f3f3f3;"></div>'),h.push('<div style="overflow:hidden;'+("success"==e.icon?"height:100px;":"")+'" id="alert-conent-gang">'),h.push('<div style="height:100%; margin-left:10px;margin-right:10px;line-height:26px;" class="jbox-span">'),"success"==e.icon&&h.push('<p style="margin:0;color:#60c060;">已发送至</p>'),h.push(e.content),h.push("</div>"),h.push("</div>"),h.push("</div>"),e.content=h.join(""),a.jBox(e.content,e)},a.jBox.alert=function(t,e,i){a.jBox.prompt(t,e,"none",i)},a.jBox.info=function(t,e,i){a.jBox.prompt(t,e,"info",i)},a.jBox.success=function(t,e,i){a.jBox.prompt(t,e,"success",i)},a.jBox.error=function(t,e,i){a.jBox.prompt(t,e,"error",i)},a.jBox.confirm=function(b,c,d,e){var defaults={buttons:eval('({ "'+a.jBox.languageDefaults.ok+'": "ok", "'+a.jBox.languageDefaults.cancel+'": "cancel" })')};void 0!=d&&"function"==typeof d?defaults.submit=d:defaults.submit=function(t,e,i){return!0},e=a.extend({},defaults,e),a.jBox.prompt(b,c,"question",e)},a.jBox.warning=function(t,e,i,s){var n={buttons:a.jBox.defaults.buttons};void 0!=i&&"function"==typeof i?n.submit=i:n.submit=function(t,e,i){return!0},s=a.extend({},n,s),a.jBox.prompt(t,e,"warning",s)},a.jBox.tip=function(t,e,i){var s={content:t,icon:e,terror:e,opacity:0,border:0,showClose:!0,buttons:{},isTip:!0};"loading"==s.icon&&(s.timeout=0,s.opacity=.1),i=a.extend({},s,i),i=a.extend({},a.jBox.tipDefaults,i),i=a.extend({},a.jBox.defaults,i),i.timeout<0&&(i.timeout=0),i.border<0&&(i.border=0),"info"!=i.icon&&"warning"!=i.icon&&"success"!=i.icon&&"error"!=i.icon&&"loading"!=i.icon&&(i.icon="info");var n=[];n.push("html:"),n.push('<div style="width:310px;font-size:20px;"><div style="position:relative;margin:20px;vertical-align:middle;font-size: 22px;max-height:250px;overflow:auto;line-height:1.5;word-break:break-all;white-space:normal;"><span class="fa jbox-icon-'+n.icon+'" style="width:45px; height:45px;background:url('+getRootPath()+"/images/demoimg/alert-"+("error"==s.terror?"1":"2")+'.png)"></span>&nbsp;<span style="position:relative;bottom:15px;line-height: 1.8;">'),n.push(i.content),n.push("</span></div></div>"),i.content=n.join(""),a(".jbox-tip").length>0&&(a(document.body).data("tip",{next:!0,options:i}),a.jBox.closeTip()),void 0!=i.focusId&&(a("#"+i.focusId).focus(),top.$("#"+i.focusId).focus()),a.jBox(i.content,i)},a.jBox.closeTip=function(){a.jBox.close(!1,"tip")},a.jBox.messager=function(t,e,i,s){a.jBox.closeMessager();var n={content:t,title:e,timeout:void 0==i?a.jBox.messagerDefaults.timeout:i,opacity:0,showClose:!0,draggable:!1,isMessager:!0};s=a.extend({},n,s),s=a.extend({},a.jBox.messagerDefaults,s);var o=a.extend({},a.jBox.defaults,{});o.title=null,s=a.extend({},o,s),s.border<0&&(s.border=0),"info"!=s.icon&&"warning"!=s.icon&&"success"!=s.icon&&"error"!=s.icon&&"question"!=s.icon&&(padding="",s.icon="none");var r=void 0==s.title?10:35,d="none"==s.icon?"height:auto;":"min-height:30px;"+(browserM&&parseInt(a.browser.version)<7?"height:auto !important;height:100%;_height:30px;":"height:auto;"),l=[];l.push("html:"),l.push('<div style="margin:10px;'+d+"padding-left:"+("none"==s.icon?0:40)+'px;text-align:left;font-size:23px;">'),l.push('<span class="fa jbox-icon-'+s.icon+'" style="position:absolute; top:'+(r+s.border)+"px;left:"+(10+s.border)+'px; width:35px; height:35px;"></span>'),l.push(s.content),l.push("</div>"),s.content=l.join(""),a.jBox(s.content,s)},a.jBox.closeMessager=function(){a.jBox.close(!1,"messager")},window.jBox=a.jBox}(jQuery),function($){function escapeRegExp(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function padLeft(t,e,i){return e<t.length?t:Array(e-t.length+1).join(i||" ")+t}function getTemplate(t,e,i,s,a,n,o){return e&&i?'<div class="bootstrap-datetimepicker-widget dropdown-menu 3" style="max-height:235px;"><div class="datepicker">'+DPGlobal.tempButton(t,o)+"</div></div>":i?'<div class="bootstrap-datetimepicker-widget dropdown-menu 2"><div class="timepicker">'+TPGlobal.getTemplate(s,a)+"</div></div>":'<div class="bootstrap-datetimepicker-widget dropdown-menu 1" style="max-height:215px;"><div class="datepicker">'+DPGlobal.tempButton(null,o)+"</div></div>"}function UTCDate(){return new Date(Date.UTC.apply(Date,arguments))}var smartPhone=void 0!=window.orientation,DateTimePicker=function(t,e){this.id=dpgId++,this.init(t,e)},dateToDate=function(t){return"string"==typeof t?new Date(t):t};DateTimePicker.prototype={constructor:DateTimePicker,init:function(t,e){if(!e.pickTime&&!e.pickDate)throw new Error("Must choose at least one picker");this.options=e,this.$element=$(t),this.$element.attr("readonly",!1),this.language="zh-CN",this.loadShow=e.loadShow,this.pickDate=e.pickDate,this.pickTime=e.pickTime,this.pickSeconds=e.pickSeconds;var i=this.$element.data("pick-date");void 0!=i&&(i?this.pickDate=!0:this.pickDate=!1);var s=this.$element.data("pick-time");void 0!=s&&(s?this.pickTime=!0:this.pickTime=!1);var a=this.$element.data("pick-second");void 0!=a&&(a?this.pickSeconds=!0:this.pickSeconds=!1),this.isInput=this.$element.is("input"),this.component=!1,this.pickTime&&(this.timeIcon||(this.timeIcon="fa fa-clock")),this.pickDate&&(this.dateIcon||(this.dateIcon="fa fa-calendar2")),this.format=e.dateFormat,this.format||(this.isInput?this.format=this.$element.data("date-format"):this.format=this.$element.find("input").data("date-format"),this.format||(this.format="yyyy-MM-dd"));var n=this.$element.hasClass("load-show")?this.loadShow=1:this.loadShow=0;if(n&&(this.pickTime=!1),this._compileFormat(),this.widget=$(getTemplate(this.timeIcon,this.pickDate,this.pickTime,e.pick12HourFormat,this.pickSeconds,e.collapse,n)).appendTo(n?this.$element:$("#scrollable")),this.inputStor={hours:this.widget.find("#dpTime input.tb"),minutes:this.widget.find("#dpTime input.te"),seconds:this.widget.find("#dpTime input.tl")},this.minViewMode=e.minViewMode||this.$element.data("date-minviewmode")||0,"string"==typeof this.minViewMode)switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}if(this.viewMode=e.viewMode||this.$element.data("date-viewmode")||0,"string"==typeof this.viewMode)switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=e.weekStart||this.$element.data("date-weekstart")||0,this.weekEnd=0===this.weekStart?6:this.weekStart-1,this.setStartDate(this.$element.data("start-date")||e.startDate),this.setEndDate(this.$element.data("end-date")||e.endDate),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this._attachDatePickerEvents()},show:function(t){var e=this.$element.data("ref-obj");if(e&&(tempString=e.split(" "),2==tempString.length&&(refObjId=tempString[0],operate=tempString[1],refObj=$(refObjId),refObj))){var i=refObj.val();i?(refObjDate=Date.parse(i.replace(/-/g,"/")),"lt"==operate&&this.setEndDate(new Date(refObjDate+864e5)),"gt"==operate&&this.setStartDate(new Date(refObjDate+288e5))):("lt"==operate&&"object"==typeof this.endDate&&this.setEndDate(1/0),"gt"==operate&&"object"==typeof this.startDate&&this.setStartDate(-(1/0)))}if(!this.$element.val()){var s=new Date;this._date=UTCDate(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()),this.viewDate=this._date,this.fillDate()}this.pickDate&&this.pickTime&&(this.downMenuTime(),this.setTime(this._date.getUTCHours(),this._date.getUTCMinutes(),this._date.getUTCSeconds())),!this.pickDate&&this.pickTime&&this.pickSeconds&&this.fillTime(),this.widget.show(),this.height=this.component?this.component.outerHeight():this.$element.outerHeight(),this.loadShow||this.place(),this.$element.trigger({type:"show",date:this._date}),this._attachDatePickerGlobalEvents(t),t&&(t.stopPropagation(),t.preventDefault())},disable:function(){this.$element.find("input").prop("disabled",!0),this._detachDatePickerEvents()},enable:function(){this.$element.find("input").prop("disabled",!1),this._attachDatePickerEvents()},hide:function(t){if(this.widget.is(":visible")&&!(this.loadShow||t&&t.target.name==this.$element[0].name)){for(var e=this.widget.find(".collapse"),i=0;i<e.length;i++){var s=e.eq(i).data("collapse");if(s&&s.transitioning)return}var a=this.$element.val();if(""!=a&&null!=a){var n=this.parseDate(a);n||(confirm("不合法的日期格式或日期超出限定范围,需要撤销吗?")?this.$element.val(""):this.$element.val(""))}this.widget.hide(),this.viewMode=this.startViewMode,this.showMode(),this.$element.trigger({type:"hide",date:this._date}),this.$element.blur(),this._detachDatePickerGlobalEvents()}},set:function(){var t="";this._unset||(t=this.formatDate(this._date));var e=this.$element.data("ref-obj");if(e&&(tempString=e.split(" "),2==tempString.length&&(refObjId=tempString[0],operate=tempString[1],refObj=$(refObjId),refObj))){var i=refObj.val();if(i){if("lt"==operate&&t>i)return;if("gt"==operate&&i>t)return}}var s=new Date(Date.parse(t.replace(/-/g,"/"))+864e5);if(!(s.valueOf()>this.endDate.valueOf()||s.valueOf()<this.startDate.valueOf()))if(this.isInput)this.$element.val(t),this._resetMaskPos(this.$element);else{if(this.component){var a=this.$element.find("input");a.val(t),this._resetMaskPos(a)}this.$element.data("date",t)}},setValue:function(t){t?this._unset=!1:this._unset=!0,"string"==typeof t?this._date=this.parseDate(t):t&&(this._date=new Date(t)),this.set(),this.viewDate=UTCDate(this._date.getUTCFullYear(),this._date.getUTCMonth(),1,0,0,0,0),this.fillDate(),this.fillTime()},setTime:function(t,e,i){for(var s=this.widget.find("input"),a=0;a<s.length;){switch(s[a].className){case"tb":this.inputStor.hours.val(padLeft(t.toString(),2,"0"));break;case"te":this.inputStor.minutes.val(padLeft(e.toString(),2,"0"));break;case"tl":this.inputStor.seconds.val(padLeft(i.toString(),2,"0"))}a++}},downMenuTime:function(){$("#dpTime .menuSel").hide()},getDate:function(){return this._unset?null:new Date(this._date.valueOf())},setDate:function(t){t?this.setValue(t.valueOf()):this.setValue(null)},setStartDate:function(t){t instanceof Date?this.startDate=t:"string"==typeof t?t&&(this.startDate=new Date(Date.parse(t.replace(/-/g,"/"))+864e5),this.startDate.getUTCFullYear()||(this.startDate=-(1/0))):this.startDate=-(1/0),this.viewDate&&this.update()},setEndDate:function(t){t instanceof Date?this.endDate=t:"string"==typeof t?t&&(this.endDate=new Date(Date.parse(t.replace(/-/g,"/"))),this.endDate.getUTCFullYear()||(this.endDate=1/0)):this.endDate=1/0,this.viewDate&&this.update()},getLocalDate:function(){if(this._unset)return null;var t=this._date;return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())},setLocalDate:function(t){t?this.setValue(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())):this.setValue(null)},place:function(){var t="absolute",e=this.component?this.component.offset():this.$element.offset();this.width=this.component?this.component.outerWidth():this.$element.outerWidth(!0);var i=this.widget.outerHeight(!0),s=$("#scrollable"),a=this.component?this.component.offset():this.$element.offset();e.top=e.top+this.height+$("#scrollable").scrollTop(),void 0!=this.options.width&&this.widget.width(this.options.width),"left"==this.options.orientation&&(this.widget.addClass("left-oriented"),e.left=e.left-this.width+20),this._isInFixed()&&(t="fixed",e.top=a.top+this.height,e.left=e.left),s.width()<a.left+this.width?(e.right=s.width()-e.left-this.width+("fixed"==t?155:18),e.left="auto","fixed"==t?e.left=e.left-(this.width>120?this.height:105):""):e.right="auto",s.height()<a.top+i+34&&(e.top=e.top-this.height-i),this.widget.css({position:t,top:e.top,left:e.left,right:e.right}),this._modalPlace(this,e)},notifyChange:function(){this.$element.trigger({type:"changeDate",date:this.getDate(),localDate:this.getLocalDate()})},update:function(t){var e=t;if(!e&&(e=this.isInput?this.$element.val():this.$element.find("input").val(),e&&(this._date=this.parseDate(e)),!this._date)){var i=new Date;this._date=UTCDate(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())}this.viewDate=UTCDate(this._date.getUTCFullYear(),this._date.getUTCMonth(),1,0,0,0,0),this.fillDate(),this.fillTime()},fillDow:function(){for(var t=this.weekStart,e=$("<tr>");t<this.weekStart+7;)e.append('<th class="dow">'+dates[this.language].daysMin[t++%7]+"</th>");this.widget.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+dates[this.language].monthsShort[e++]+"</span>";this.widget.find(".datepicker-months td").append(t)},fillDate:function(){var t=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),i=UTCDate(this._date.getUTCFullYear(),this._date.getUTCMonth(),this._date.getUTCDate(),0,0,0,0),s="object"==typeof this.startDate?this.startDate.getUTCFullYear():-(1/0),a="object"==typeof this.startDate?this.startDate.getUTCMonth():-1,n="object"==typeof this.endDate?this.endDate.getUTCFullYear():1/0,o="object"==typeof this.endDate?this.endDate.getUTCMonth():12;this.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),this.widget.find(".datepicker-days th:eq(1)").text(t+"年 "+dates[this.language].months[e]);var r=UTCDate(t,e-1,28,0,0,0,0),d=DPGlobal.getDaysInMonth(r.getUTCFullYear(),r.getUTCMonth());r.setUTCDate(d),r.setUTCDate(d-(r.getUTCDay()-this.weekStart+7)%7),(t==s&&a>=e||s>t)&&this.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(t==n&&e>=o||t>n)&&this.widget.find(".datepicker-days th:eq(2)").addClass("disabled");var l=new Date(r.valueOf());l.setUTCDate(l.getUTCDate()+42),l=l.valueOf();for(var c,h,p=[];r.valueOf()<l;)r.getUTCDay()===this.weekStart&&(c=$("<tr>"),p.push(c)),h="",r.getUTCFullYear()<t||r.getUTCFullYear()==t&&r.getUTCMonth()<e?h+=" old":(r.getUTCFullYear()>t||r.getUTCFullYear()==t&&r.getUTCMonth()>e)&&(h+=" new"),r.valueOf()===i.valueOf()&&(h+=" active"),r.valueOf()+864e5<=this.startDate&&(h+=" disabled"),r.valueOf()>this.endDate&&(h+=" disabled"),c.append('<td class="day'+h+'">'+r.getUTCDate()+"</td>"),r.setUTCDate(r.getUTCDate()+1);this.widget.find(".datepicker-days tbody").empty().append(p);var u=this._date.getUTCFullYear(),f=this.widget.find(".datepicker-months").find("th:eq(1)").text(t+"年").end().find("span").removeClass("active");u===t&&f.eq(this._date.getUTCMonth()).addClass("active"),s>u-1&&this.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),u+1>n&&this.widget.find(".datepicker-months th:eq(2)").addClass("disabled");for(var m=0;12>m;m++)t==s&&a>m||s>t?$(f[m]).addClass("disabled"):(t==n&&m>o||t>n)&&$(f[m]).addClass("disabled");
p="",t=10*parseInt(t/10,10);var g=this.widget.find(".datepicker-years").find("th:eq(1)").text(t+"年 - "+(t+9)+"年").end().find("td");this.widget.find(".datepicker-years").find("th").removeClass("disabled"),s>t&&this.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),t+9>n&&this.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),t-=1;for(var m=-1;11>m;m++)p+='<span class="year'+(-1===m||10===m?" old":"")+(u===t?" active":"")+(s>t||t>n?" disabled":"")+'">'+t+"</span>",t+=1;g.html(p)},fillHours:function(){var t=this.widget.find(".timepicker .timepicker-hours table");t.parent().hide();var e="";if(this.options.pick12HourFormat)for(var i=1,s=0;3>s;s+=1){e+="<tr>";for(var a=0;4>a;a+=1){var n=i.toString();e+='<td class="hour">'+padLeft(n,2,"0")+"</td>",i++}e+="</tr>"}else for(var i=0,s=0;6>s;s+=1){e+="<tr>";for(var a=0;4>a;a+=1){var n=i.toString();e+='<td class="hour">'+padLeft(n,2,"0")+"</td>",i++}e+="</tr>"}t.html(e)},fillMinutes:function(){var t=this.widget.find(".timepicker .timepicker-minutes table");t.parent().hide();for(var e="",i=0,s=0;5>s;s++){e+="<tr>";for(var a=0;4>a;a+=1){var n=i.toString();e+='<td class="minute">'+padLeft(n,2,"0")+"</td>",i+=3}e+="</tr>"}t.html(e)},fillSeconds:function(){var t=this.widget.find(".timepicker .timepicker-seconds table");t.parent().hide();for(var e="",i=0,s=0;5>s;s++){e+="<tr>";for(var a=0;4>a;a+=1){var n=i.toString();e+='<td class="second">'+padLeft(n,2,"0")+"</td>",i+=3}e+="</tr>"}t.html(e)},fillTime:function(){if(this._date){var t=this.widget.find(".timepicker span[data-time-component]"),e=(t.closest("table"),this.options.pick12HourFormat),i=this._date.getUTCHours(),s=0,a=0,n="AM";e&&(i>=12&&(n="PM"),0===i?i=12:12!=i&&(i%=12),this.widget.find(".timepicker [data-action=togglePeriod]").text(n)),i=i.toString(),s=this._date.getUTCMinutes().toString(),a=this._date.getUTCSeconds().toString(),t.find("input").each(function(){switch($(this).data("action")){case"selectHour":$(this).val(padLeft(i,2,"0"));break;case"selectMinute":$(this).val(padLeft(s,2,"0"));break;case"selectSecond":$(this).val(padLeft(a,2,"0"))}})}},click:function(t){t.stopPropagation(),t.preventDefault(),this._unset=!1;var e=$(t.target).closest("span, td, th, button, i, input");if(1===e.length&&!e.is(".disabled"))switch(this.downMenuTime(),e[0].nodeName.toLowerCase()){case"th":switch(e[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var i=this.viewDate,s=DPGlobal.modes[this.viewMode].navFnc,a=DPGlobal.modes[this.viewMode].navStep;"prev"===e[0].className&&(a=-1*a),i["set"+s](i["get"+s]()+a),this.fillDate(),this.set()}break;case"span":var n=!1;if(e.is(".menuSapn")){var o=parseInt(e.text(),10)||0;return e.parent().is(".hhMenu")&&this.inputStor.hours.val(padLeft(o.toString(),2,"0")),e.parent().is(".mmMenu")&&this.inputStor.minutes.val(padLeft(o.toString(),2,"0")),e.parent().is(".ssMenu")&&this.inputStor.seconds.val(padLeft(o.toString(),2,"0")),void this.downMenuTime()}if(e.is(".month")){n=!0;var r=e.parent().find("span").index(e);this.viewDate.setUTCMonth(r)}else{var d=parseInt(e.text(),10)||0;this.viewDate.setUTCFullYear(d)}0!==this.viewMode&&(this._date=UTCDate(this.viewDate.getUTCFullYear(),this.viewDate.getUTCMonth(),this.viewDate.getUTCDate(),this._date.getUTCHours(),this._date.getUTCMinutes(),this._date.getUTCSeconds(),this._date.getUTCMilliseconds()),this.notifyChange()),this.showMode(-1),this.fillDate(),this.set(),2==this.viewMode&&2==this.minViewMode&&this.hide(),n&&1==this.minViewMode&&this.hide();break;case"td":if(e.is(".day")){var l=parseInt(e.text(),10)||1,r=this.viewDate.getUTCMonth(),d=this.viewDate.getUTCFullYear();e.is(".old")?0===r?(r=11,d-=1):r-=1:e.is(".new")&&(11==r?(r=0,d+=1):r+=1),this._date=UTCDate(d,r,l,this._date.getUTCHours(),this._date.getUTCMinutes(),this._date.getUTCSeconds(),this._date.getUTCMilliseconds()),this.viewDate=UTCDate(d,r,Math.min(28,l),0,0,0,0),this.onCallback(t),this.fillDate(),this.set(),this.notifyChange(),this.pickTime&&this.pickDate?e.is(".active")&&this.hide():this.hide()}break;case"button":switch(e[0].className){case"clear":this.$element.val("").removeClass("ferror"),this.hide();break;case"today":var c=new Date;this.pickDate&&this.pickTime?this._date=UTCDate(c.getFullYear(),c.getMonth(),c.getDate(),this.compareTime(this.inputStor.hours.val(),"hour"),this.compareTime(this.inputStor.minutes.val(),"minutes"),this.compareTime(this.inputStor.seconds.val(),"seconds"),this._date.getUTCMilliseconds()):this._date=UTCDate(c.getFullYear(),c.getMonth(),c.getDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),this.fillDate(),this.set(),this.notifyChange(),this.hide(),this.onCallback(t);break;case"confirm":this.pickDate&&this.pickTime&&(this._date=UTCDate(this._date.getUTCFullYear(),this._date.getUTCMonth(),this._date.getUTCDate(),this.compareTime(this.inputStor.hours.val(),"hour"),this.compareTime(this.inputStor.minutes.val(),"minutes"),this.compareTime(this.inputStor.seconds.val(),"seconds"),this._date.getUTCMilliseconds())),this.set(),this.notifyChange(),this.hide(),this.onCallback(t)}break;case"i":break;case"input":switch(e[0].className){case"tb":$(e[0]).focus(),$(e[0]).blur(function(){var t=parseInt($(this).val(),10)||0;t>23&&(t=23),$(e[0]).val(padLeft(t.toString(),2,"0"))}),$("#dpTime .hhMenu").show().siblings(".menuSel").hide();break;case"te":$(e[0]).focus(),$(e[0]).blur(function(){var t=parseInt($(this).val(),10)||0;t>59&&(t=59),$(e[0]).val(padLeft(t.toString(),2,"0"))}),$("#dpTime .mmMenu").show().siblings(".menuSel").hide();break;case"tl":$(e[0]).focus(),$(e[0]).blur(function(){var t=parseInt($(this).val(),10)||0;t>59&&(t=59),$(e[0]).val(padLeft(t.toString(),2,"0"))}),$("#dpTime .ssMenu").show().siblings(".menuSel").hide()}}},onCallback:function(e){var functionName=this.$element.data("callback")||0;if(functionName){var functionObj=eval(functionName);"function"==typeof functionObj&&(e.pickerObject=this,functionObj.apply(this.$element,arguments))}},actions:{incrementHours:function(t){this.actions.blurTime.call(this),this._date.setUTCHours(this._date.getUTCHours()+1)},incrementMinutes:function(t){this.actions.blurTime.call(this),this._date.setUTCMinutes(this._date.getUTCMinutes()+1)},incrementSeconds:function(t){this.actions.blurTime.call(this),this._date.setUTCSeconds(this._date.getUTCSeconds()+1)},decrementHours:function(t){this.actions.blurTime.call(this),this._date.setUTCHours(this._date.getUTCHours()-1)},decrementMinutes:function(t){this.actions.blurTime.call(this),this._date.setUTCMinutes(this._date.getUTCMinutes()-1)},decrementSeconds:function(t){this.actions.blurTime.call(this),this._date.setUTCSeconds(this._date.getUTCSeconds()-1)},togglePeriod:function(t){var e=this._date.getUTCHours();e>=12?e-=12:e+=12,this._date.setUTCHours(e)},showPicker:function(){this.widget.find(".timepicker > div:not(.timepicker-picker)").hide(),this.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){},sureTime:function(t){var e=this.widget.find(".timepicker span[data-time-component]"),i=this;e.find("input").each(function(){var t=$(this).val();switch($(this).data("action")){case"selectHour":i._date.setUTCHours(i.compareTime(t,"hour"));break;case"selectMinute":i._date.setUTCMinutes(i.compareTime(t,"minutes"));break;case"selectSecond":i._date.setUTCSeconds(i.compareTime(t,"seconds"))}}),i.hide(),this.onCallback(t)},clearTime:function(){this.$element.val(""),this.hide()},showMinutes:function(){},showSeconds:function(){},blurTime:function(){var t=this.widget.find(".timepicker span[data-time-component]"),e=this;t.find("input").each(function(){var t=$(this).val();switch($(this).data("action")){case"selectHour":e._date.setUTCHours(e.compareTime(t,"hour"));break;case"selectMinute":e._date.setUTCMinutes(e.compareTime(t,"minutes"));break;case"selectSecond":e._date.setUTCSeconds(e.compareTime(t,"seconds"))}})},selectHour:function(t){$(t.target).focus()},selectMinute:function(t){$(t.target).focus()},selectSecond:function(t){$(t.target).focus()}},doAction:function(t){t.stopPropagation(),t.preventDefault(),this._date||(this._date=UTCDate(1970,0,0,0,0,0,0));var e=$(t.currentTarget).data("action"),i=this.actions[e].apply(this,arguments);return"clearTime"==e||"selectHour"==e||"selectMinute"==e||"selectSecond"==e?i:(this.set(),this.fillTime(),this.notifyChange(),i)},setFillTime:function(t,e){""!==t&&("hour"==e?this._date.setUTCHours(this.compareTime(t,e)):"minute"==e?this._date.setUTCMinutes(this.compareTime(t,e)):"second"==e&&this._date.setUTCSeconds(this.compareTime(t,e)),this.set(),this.fillTime(),this.notifyChange())},stopEvent:function(t){t.stopPropagation(),t.preventDefault()},compareTime:function(t,e){var i=parseInt(t,10)||0;return"hour"==e?i>23&&(i=23):i>59&&(i=59),i},keydown:function(t){var e=t.keyCode||t.which;9==e&&this.hide()},keypress:function(t){var e=String.fromCharCode(t.keyCode).toLowerCase();if(!t.ctrlKey||"v"!=e){var i=t.which;if(8!=i&&46!=i){var s=$(t.target),a=String.fromCharCode(i),n=s.val()||"";n+=a;var o=this._mask[this._maskPos];if(!o)return!1;if(o.end==n.length){if(!o.pattern.test(n.slice(o.start))){for(n=n.slice(0,n.length-1);(o=this._mask[this._maskPos])&&o.character;)n+=o.character,this._maskPos++;return n+=a,o.end!=n.length?(s.val(n),!1):o.pattern.test(n.slice(o.start))?(s.val(n),this._maskPos++,!1):(s.val(n.slice(0,o.start)),!1)}this._maskPos++}}}},change:function(t){var e=$(t.target);this._resetMaskPos(e)},showMode:function(t){t&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+t))),this.widget.find(".datepicker > div").hide().filter(".datepicker-"+DPGlobal.modes[this.viewMode].clsName).show()},destroy:function(){this._detachDatePickerEvents(),this._detachDatePickerGlobalEvents(),this.widget.remove(),this.$element.removeData("datetimepicker"),this.component.removeData("datetimepicker")},formatDate:function(t){return this.format.replace(formatReplacer,function(e){var i,s,a,n=e.length;if("ms"===e&&(n=1),s=dateFormatComponents[e].property,"Hours12"===s)a=t.getUTCHours(),0===a?a=12:12!==a&&(a%=12);else{if("Period12"===s)return t.getUTCHours()>=12?"PM":"AM";"UTCYear"===s?(a=t.getUTCFullYear(),a=a.toString().substr(2)):(i="get"+s,a=t[i]())}return"getUTCMonth"===i&&(a+=1),padLeft(a.toString(),n,"0")})},parseDate:function(t){var e,i,s,a,n={};if(!(e=this._formatPattern.exec(t)))return null;for(i=1;i<e.length;i++)s=this._propertiesByIndex[i],s&&(a=e[i],/^\d+$/.test(a)&&(a=parseInt(a,10)),n[s]=a);return this._finishParsingDate(n)},_resetMaskPos:function(t){for(var e=t.val(),i=0;i<this._mask.length;i++){if(this._mask[i].end>e.length){this._maskPos=i;break}if(this._mask[i].end===e.length){this._maskPos=i+1;break}}},_finishParsingDate:function(t){var e,i,s,a,n,o,r;return e=t.UTCFullYear,t.UTCYear&&(e=2e3+t.UTCYear),e||(e=1970),i=t.UTCMonth?t.UTCMonth-1:0,s=t.UTCDate||1,a=t.UTCHours||0,n=t.UTCMinutes||0,o=t.UTCSeconds||0,r=t.UTCMilliseconds||0,t.Hours12&&(a=t.Hours12),t.Period12&&(/pm/i.test(t.Period12)?12!=a&&(a=(a+12)%24):a%=12),UTCDate(e,i,s,a,n,o,r)},_compileFormat:function(){for(var t,e,i=[],s=[],a=this.format,n={},o=0,r=0;t=formatComponent.exec(a);)e=t[0],e in dateFormatComponents?(o++,n[o]=dateFormatComponents[e].property,i.push("\\s*"+dateFormatComponents[e].getPattern(this)+"\\s*"),s.push({pattern:new RegExp(dateFormatComponents[e].getPattern(this)),property:dateFormatComponents[e].property,start:r,end:r+=e.length})):(i.push(escapeRegExp(e)),s.push({pattern:new RegExp(escapeRegExp(e)),character:e,start:r,end:++r})),a=a.slice(e.length);this._mask=s,this._maskPos=0,this._formatPattern=new RegExp("^\\s*"+i.join("")+"\\s*$"),this._propertiesByIndex=n},inputBlur:function(t){!this.widget.is(":visible")},_attachDatePickerEvents:function(){var t=this;this.widget.on("click",".datepicker *",$.proxy(this.click,this)),this.widget.on("click","[data-action]",$.proxy(this.doAction,this)),this.isInput&&this.$element.on("blur",$.proxy(this.inputBlur,this)),this.widget.on("mousedown",$.proxy(this.stopEvent,this)),this.pickDate&&this.pickTime&&this.widget.on("click.togglePicker",".accordion-toggle",function(e){e.stopPropagation();var i=$(this),s=i.closest("ul"),a=s.find(".collapse.in"),n=s.find(".collapse:not(.in)");if(a&&a.length){var o=a.data("collapse");if(o&&o.transitioning)return;a.collapse("hide"),n.collapse("show"),i.find("i").toggleClass(t.timeIcon+" "+t.dateIcon),t.$element.find(".add-on i").toggleClass(t.timeIcon+" "+t.dateIcon)}}),this.loadShow&&this.widget.show(),this.isInput?(this.$element.on({click:$.proxy(this.show,this),keyup:$.proxy(this.change,this)}),this.options.maskInput&&this.$element.on({keydown:$.proxy(this.keydown,this),keypress:$.proxy(this.keypress,this)})):(this.$element.on({change:$.proxy(this.change,this)},"input"),this.options.maskInput&&this.$element.on({keydown:$.proxy(this.keydown,this),keypress:$.proxy(this.keypress,this)},"input"),this.component?this.component.on("click",$.proxy(this.show,this)):this.$element.on("click",$.proxy(this.show,this)))},_attachDatePickerGlobalEvents:function(t){$(document).on("mousedown.datetimepicker"+this.id,$.proxy(this.hide,this))},_detachDatePickerEvents:function(){this.widget.off("click",".datepicker *",this.click),this.widget.off("click","[data-action]"),this.widget.off("mousedown",this.stopEvent),this.pickDate&&this.pickTime&&this.widget.off("click.togglePicker"),this.isInput?(this.$element.off("blur",this.inputBlur),this.$element.off({click:this.show,change:this.change}),this.options.maskInput&&this.$element.off({keydown:this.keydown,keypress:this.keypress})):(this.$element.off({change:this.change},"input"),this.options.maskInput&&this.$element.off({keydown:this.keydown,keypress:this.keypress},"input"),this.component?this.component.off("click",this.show):this.$element.off("click",this.show))},_detachDatePickerGlobalEvents:function(){$(window).off("resize.datetimepicker"+this.id),$(document).off("mousedown.datetimepicker"+this.id)},_isInFixed:function(){if(this.$element){for(var t=this.$element.parents(),e=!1,i=0;i<t.length;i++)if("fixed"==$(t[i]).css("position")){e=!0;break}return e}return!1},_modalPlace:function(t,e){var i=t.$element.closest(".modal-body");i.scroll(function(){t.hide()})}},$.fn.datepicker=function(t,e){return this.each(function(){var i=$(this),s=i.data("datetimepicker"),a="object"==typeof t&&t;s||i.data("datetimepicker",s=new DateTimePicker(this,$.extend({},$.fn.datepicker.defaults,a))),"string"==typeof t&&s[t](e)})},$.fn.datepicker.defaults={maskInput:!0,pickDate:!0,pickTime:!1,pick12HourFormat:!1,pickSeconds:!0,startDate:-(1/0),endDate:1/0,collapse:!0,loadShow:!1},$.fn.datepicker.Constructor=DateTimePicker;var dpgId=0,dates=$.fn.datepicker.dates={"zh-CN":{days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","星期日"],daysShort:["周日","周一","周二","周三","周四","周五","周六","周日"],daysMin:["日","一","二","三","四","五","六","日"],months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthsShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],today:"今日"}},dateFormatComponents={dd:{property:"UTCDate",getPattern:function(){return"(0?[1-9]|[1-2][0-9]|3[0-1])\\b"}},MM:{property:"UTCMonth",getPattern:function(){return"(0?[1-9]|1[0-2])\\b"}},yy:{property:"UTCYear",getPattern:function(){return"(\\d{2})\\b"}},yyyy:{property:"UTCFullYear",getPattern:function(){return"(\\d{4})\\b"}},hh:{property:"Hours12",getPattern:function(){return"(0?[1-9]|1[0-2])\\b"}},mm:{property:"UTCMinutes",getPattern:function(){return"(0?[0-9]|[1-5][0-9])\\b"}},ss:{property:"UTCSeconds",getPattern:function(){return"(0?[0-9]|[1-5][0-9])\\b"}},ms:{property:"UTCMilliseconds",getPattern:function(){return"([0-9]{1,3})\\b"}},HH:{property:"UTCHours",getPattern:function(){return"(0?[0-9]|1[0-9]|2[0-3])\\b"}},PP:{property:"Period12",getPattern:function(){return"(AM|PM|am|pm|Am|aM|Pm|pM)\\b"}}},keys=[];for(var k in dateFormatComponents)keys.push(k);keys[keys.length-1]+="\\b",keys.push(".");var formatComponent=new RegExp(keys.join("\\b|"));keys.pop();var formatReplacer=new RegExp(keys.join("\\b|"),"g"),DPGlobal={modes:[{clsName:"days",navFnc:"UTCMonth",navStep:1},{clsName:"months",navFnc:"UTCFullYear",navStep:1},{clsName:"years",navFnc:"UTCFullYear",navStep:10}],isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,DPGlobal.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch" ></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};DPGlobal.template='<div class="datepicker-days"><table class="table-condensed">'+DPGlobal.headTemplate+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+"</table></div>",DPGlobal.timeModelate='<div class="menuSel hhMenu" ><span class="menuSapn">0</span><span class="menuSapn">1</span><span class="menuSapn">2</span><span class="menuSapn">3</span><span class="menuSapn">4</span><span class="menuSapn">5</span><span class="menuSapn">6</span><span class="menuSapn">7</span><span class="menuSapn">8</span><span class="menuSapn">9</span><span class="menuSapn">10</span><span class="menuSapn">11</span><span class="menuSapn">12</span><span class="menuSapn">13</span><span class="menuSapn">14</span><span class="menuSapn">15</span><span class="menuSapn">16</span><span class="menuSapn">17</span><span class="menuSapn">18</span><span class="menuSapn">19</span><span class="menuSapn">20</span><span class="menuSapn">21</span><span class="menuSapn">22</span><span class="menuSapn">23</span></div><div class="menuSel mmMenu" ><span class="menuSapn">0</span><span class="menuSapn">5</span><span class="menuSapn">10</span><span class="menuSapn">15</span><span class="menuSapn">20</span><span class="menuSapn">25</span><span class="menuSapn">30</span><span class="menuSapn">35</span><span class="menuSapn">40</span><span class="menuSapn">45</span><span class="menuSapn">50</span><span class="menuSapn">55</span></div><div class="menuSel ssMenu" ><span class="menuSapn">0</span><span class="menuSapn">10</span><span class="menuSapn">20</span><span class="menuSapn">30</span><span class="menuSapn">40</span><span class="menuSapn">50</span></div>',DPGlobal.timeiInputMode='<div class="dpconter"><font class="bold m-r-sm">时间</font></div><div class="dpconter b"><input class="tb" maxlength="2"/><b class="tm">:</b><input class="te" maxlength="2"/><b class="tm">:</b><input class="tl" maxlength="2"/></div>',DPGlobal.tempButton=function(t,e){return null==t?'<div class="datepicker-days"><table class="table-condensed">'+DPGlobal.headTemplate+"<tbody></tbody></table>"+(e?"":'<div class="fr"><button class="clear">清空</button><button class="today" style="margin-left: 5px;">今天</button><button class="confirm" style="margin-left: 5px;">确定</button></div>')+'</div><div class="datepicker-months"><table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+"</table></div>":'<div class="datepicker-days"><table class="table-condensed">'+DPGlobal.headTemplate+'<tbody></tbody></table><div class="divconter" id="dpTime">'+DPGlobal.timeModelate+DPGlobal.timeiInputMode+"</div>"+(e?"":'<div class="fr"><button class="clear">清空</button><button class="today" style="margin-left: 5px;">今天</button><button class="confirm" style="margin-left: 5px;">确定</button></div>')+'</div><div class="datepicker-months"><table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+DPGlobal.headTemplate+DPGlobal.contTemplate+"</table></div>"};var TPGlobal={hourTemplate:'<span data-action="showHours" data-time-component="hours" class="timepicker-hour"><input type="text" maxlength="2" data-action="selectHour" style="text-align:center; vertical-align:middle"/></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"><input type="text" maxlength="2" data-action="selectMinute" style="text-align:center; vertical-align:middle"/></span>',secondTemplate:'<span data-action="showSeconds" data-time-component="seconds" class="timepicker-second"><input type="text" maxlength="2" data-action="selectSecond" style="text-align:center; vertical-align:middle"/></span>'};TPGlobal.getTemplate=function(t,e){return'<div class="timepicker-picker"><table class="table-condensed"'+(t?' data-hour-format="12"':"")+'><tr><td><a href="#" class="btn" data-action="incrementHours"><i class="fa fa-chevron-up"></i></a></td><td class="separator"></td><td><a href="#" class="btn" data-action="incrementMinutes"><i class="fa fa-chevron-up"></i></a></td>'+(e?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><i class="fa fa-chevron-up"></i></a></td>':"")+(t?'<td class="separator"></td>':"")+"</tr><tr><td>"+TPGlobal.hourTemplate+'</td> <td class="separator">:</td><td>'+TPGlobal.minuteTemplate+"</td> "+(e?'<td class="separator">:</td><td>'+TPGlobal.secondTemplate+"</td>":"")+(t?'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>':"")+'</tr><tr><td><a href="#" class="btn" data-action="decrementHours"><i class="fa fa-chevron-down"></i></a></td><td class="separator"></td><td><a href="#" class="btn" data-action="decrementMinutes"><i class="fa fa-chevron-down"></i></a></td>'+(e?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><i class="fa fa-chevron-down"></i></a></td>':"")+(t?'<td class="separator"></td>':"")+'</tr></table><div class="fr m-t-xs"><button data-action="clearTime">清空</button><button data-action="sureTime" style="margin-left:10px;">确定</button></div></div>'}}(window.jQuery);